<!--miniprogram/pages/home/index.wxml-->
<view>
  <!-- status:0 | 7 加载动画区域 顶层layer-->
  <view class="loading-layer" wx:if="{{status === 0}}">
    <view class="design">
      <view class="logo">
        <image src="./../../images/home/slogan-1.png"></image>
      </view>
      <view class="bell">
        <image src="./../../images/home/bell.png"></image>
      </view>
    </view>
    <view class="loading-bar">
      <view class="progress"></view>
    </view>
    <view class="loading-txt">
      正在加载...
    </view>
  </view>

  <!-- 背景音乐layer 顶层layer -->
  <view class="music-layer" bindtap="handleCheckBgMusicStatus">
    <image class="icon-music {{bgMusicPlayStatus ? 'rotate' : ''}}" src="./../../images/home/music-icon.png">
    </image>
  </view>

  <!-- 图层区域 -->
  <view class="layer">

    <!-- slogan图层 -->
    <view class="slogan-layer" bindtap="handleChooseFace">
      <view class="s-l-box">
        <image class="slogan1" src="./../../images/home/slogan-1.png"></image>
        <image wx:if="{{status === 1}}" class="slogan2" src="./../../images/home/slogan-2.png"></image>
        <image wx:if="{{status === 2}}" class="slogan3" src="./../../images/home/slogan-1.png"></image>
      </view>
    </view>

    <!-- 天气图层 -->
    <view class="weather-layer">
      <image src="./../../images/home/weather/1.png" mode="scaleToFill"></image>
    </view>
    <!-- 主体背景图层 -->

    <!-- 服装图层 -->

    <!-- 人脸图层 -->
  </view>

  <!-- 用户操作区域 -->
  <view class="operation ope-{{status}}">
    <!-- status: 1 -->
    <view class="sts1" wx:if="{{status === 1}}">
      <view class="btn1 btn-start" bindtap="handleStartCreate">
        <image src="./../../images/home/buttons/start.png"></image>
      </view>
      <view class="btn1 btn-intro" bindtap="handleCheckActivityModal">
        <image src="./../../images/home/buttons/intro.png"></image>
      </view>
    </view>
    <!-- status: 2 -->
    <view class="sts2" wx:if="{{status === 2}}">
      <view class="tabs">
        <view class="tab {{index === currentStatus2Tab ? 'active' : ''}}" wx:for="{{status2Tabs}}"
          data-index="{{index}}" bindtap="handleCheckStatus2Tab" wx:key="index">
          <view class="txt" data-index="{{index}}">{{item.title}}</view>
        </view>
      </view>
      <view class="cabinet">
        <image class="cab-bg" src="./../../images/home/cabinet.png"></image>
        <view class="boxlist dress-list list1" wx-if="{{currentStatus2Tab === 0}}">
          <view class="cell" wx:for="{{dressList}}" data-index="{{index}}" bindtap="handleCheckDressTab"
            data-item="{{item}}" wx:key="id">
            <image
              src="./../../images/home/dress/{{(index + 1) + (currentDressTab.id === item.id ? '_active' : '')}}.png">
            </image>
          </view>
        </view>

        <view class="boxlist background-list list2" wx-if="{{currentStatus2Tab === 1}}">
          <view class="cell" wx:for="{{backgroundList}}" data-index="{{index}}" bindtap="handleCheckBackgroundTab"
            data-item="{{item}}" wx:key="id">
            <image
              src="./../../images/home/background/{{(index + 1) + (currentBackgroundTab.id === item.id ? '_active' : '')}}.png">
            </image>
          </view>
        </view>
      </view>
      <view class="btn-group">
        <view class="btn2 btn-prev" bindtap="handlePrev">
          <image src="./../../images/home/buttons/prev.png"></image>
        </view>
        <view class="btn2 btn-next" bindtap="handleNext">
          <image src="./../../images/home/buttons/next.png"></image>
        </view>
      </view>

    </view>
    <!-- status: 3 4 5-->
    <view class="sts345" wx:if="{{status >= 3 && status <= 5}}">
      <view class="cabinet">
        <image class="cab-bg" src="./../../images/home/cabinet.png"></image>
        <view class="record-box" wx:if="{{status === 3}}">
          <view class="record-btn-group" bindtap="openRecording">
            <image class="record-start" src="./../../images/home/buttons/start_record.png"></image>
            <view class="txt">点击录制语音</view>
          </view>
        </view>
        <view class="record-box" wx:if="{{status === 4}}">
          <view class="animate-box">
            <view class="animation left" bindtap="click">
              <view class="animationName"></view>
              <view class="animationName"></view>
              <view class="animationName"></view>
              <view class="animationName"></view>
            </view>
            <view class="animation reverse right" bindtap="click">
              <view class="animationName"></view>
              <view class="animationName"></view>
              <view class="animationName"></view>
              <view class="animationName"></view>
            </view>
          </view>

          <view class="record-btn-group" bindtap="shutRecording">
            <image class="record-start" src="./../../images/home/buttons/recording.png"></image>
            <view class="txt">再次点击停止录音</view>

          </view>

        </view>
        <view class="record-box" wx:if="{{status === 5}}">
          <view class="record-btn-group flex">
            <view class="cell" bindtap="recordingAndPlaying">
              <image class="record-start" src="./../../images/home/buttons/try_listen.png"></image>
              <view class="txt">试听</view>
            </view>
            <view class="cell" bindtap="handleSetStep" data-step="3">
              <image class="record-start" src="./../../images/home/buttons/re_record.png"></image>
              <view class="txt">重录</view>
            </view>
          </view>
        </view>
      </view>

      <view class="btn-group" wx-if="{{status === 3 || status === 4}}">
        <view class="btn2 btn-prev" bindtap="handlePrev">
          <image src="./../../images/home/buttons/prev.png"></image>
        </view>
      </view>
      <view class="btn-group" wx-if="{{status === 5}}">
        <view class="btn2 btn-prev btn5" bindtap="handleSubmit">
          <image src="./../../images/home/buttons/submit.png"></image>
        </view>
      </view>
    </view>

    <!-- status: 7 -->
    <view class="sts7" wx:if="{{status === 7}}">
      <view class="radio-bar">
        <view class="radio-icon">
          <image src="./../../images/home/audio.png"></image>
        </view>
        <view class="radio-txt">
          点击听听我的圣诞祝福
        </view>
      </view>
      <view class="btn-group">
        <view class="btn7 btn-prev">
          <image src="./../../images/home/buttons/re_create.png"></image>
        </view>
        <view class="btn7 btn-next">
          <image src="./../../images/home/buttons/bless.png"></image>
        </view>
        <view class="btn7 btn-next">
          <image src="./../../images/home/buttons/lucky_wheel.png"></image>
        </view>
      </view>
    </view>

    <!-- status: 8 -->
    <view class="sts8" wx:if="{{status === 8}}">
      <view class="radio-bar">
        <view class="radio-icon">
          <image src="./../../images/home/audio.png"></image>
        </view>
        <view class="radio-txt">
          点击听听我的圣诞祝福
        </view>
      </view>
      <view class="btn-group">
        <view class="btn8 btn-prev">
          <image src="./../../images/home/buttons/iwant.png"></image>
        </view>
      </view>

    </view>
  </view>

  <!-- footer -->
  <view class="footer" wx:if="{{status === 1}}">
    最终解释权归applaws所有
  </view>

  <!-- modal activity活动介绍 -->
  <view class="modal modal-activity" wx:if="{{modalStatusMap.activity}}">
    <view class="modal-trans">
      <view class="close" bindtap="handleCheckActivityModal">
        <image src="./../../images/home/buttons/close.png"></image>
      </view>
      <view class="content">
        <image src="./../../images/home/modal/modal-activity.png"></image>
      </view>
    </view>
  </view>
</view>